<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>JS Array Methods</title>
  </head>
  <body>
    <h2>Convert Array to Uppercase</h2>

    <p id="originalArray"></p>
    <p id="uppercaseArray"></p>

    <h2>Array of Strings</h2>

    <ul id="stringList"></ul>
    <script>
      // ***Understanding different types of array methods in JavaScript***
      let person = [
        "Ritwik",
        "Arvind",
        "Mohan",
        "Abhinav",
        "Riya",
        "Harikrishna",
        "Mohan",
      ];

      // 1. Mutator Methods (Modify the original array):

      console.log(person.push("Soham")); //adding a new element - returns the new length of the array
      console.log(person);

      console.log(person.pop()); //remove the last element - returns the element which got removed
      console.log(person);

      console.log(person.unshift(101)); //add a new element in the beginning of the array - returns the new length of the array
      console.log(person);

      console.log(person.shift()); //remove the first element - returns the element which got removed
      console.log(person);

      console.log(person.reverse()); //reverse the array - returns the reversed array
      console.log(person); //it will reverse the original array

      console.log(person.sort()); //sort the array - returns the sorted array
      console.log(person); //it will sort the original array

      //splice(start, deleteCount, ...items) - Used to add or remove items from the original array (it mutates the array)

      person.splice(2, 2); // Remove 2 elements starting from index 2
      console.log(person);
      // Output: ["Ritwik", "Arvind", "Riya", "Harikrishna", "Mohan"]

      person.splice(1, 0, "John"); // Insert new element at index 1 without removing anything
      console.log(person);
      // Output: ["Ritwik", "John", "Arvind", "Riya", "Harikrishna", "Mohan"]

      console.log(person.splice(1, 2, "Alice", "Bob")); // Remove 2 elements starting from index 1 and add "Alice" and "Bob" - returns the removed elements

      // Example:-
      const food = ["pizza", "cake", "salad", "cookie"];
      console.log(food.splice(1, 0, "burger")); //does change the food array
      console.log(food); //['pizza', 'burger', 'cake', 'salad', 'cookie']

      //try different possibilities
      console.log(food.splice(2, 2, "biryani")); //cake, salad
      console.log(food);
      console.log(food.splice(1, 3, ""));
      console.log(food);
      food.splice(1, 1);
      console.log(food);

      // fill(value, start, end) - Replaces elements from start to end - 1 with a static value (mutates the array)

      person.fill("NewValue", 1, 4); // Replace elements from index 1 to 3 with "NewValue"
      console.log(person); // Output: ["Ritwik", "NewValue", "NewValue", "NewValue", "Harikrishna", "Mohan"]

      console.log(person.fill("DefaultValue", 1, 0)); // If start is greater than end, it does nothing - returns the original array
      console.log(person.fill("DefaultValue", 1, 1)); // If start equals end, it does nothing - returns the original array
      console.log(person.fill("DefaultValue", 1, 6)); // If end exceeds the array length, it fills till the end - returns the modified array
      console.log(person.fill("DefaultValue", 0, 6)); // If start is 0, it fills the entire array - returns the modified array
      console.log(person.fill("DefaultValue", 0, 0)); // If both start and end are 0, it does nothing - returns the original array

      console.log("@#####################");

      // 2. Accessor Methods (Do not modify the original array):

      // concat(...arrays) - Merges two or more arrays and returns a new array (does not mutate original).

      let newPeople = ["Sohan", "Kiran"];
      let merged = person.concat(newPeople);
      console.log(merged); // Output: ["Ritwik", "Arvind", "Mohan", "Abhinav", "Riya", "Harikrishna", "Mohan", "Sohan", "Kiran"]

      // slice(start, end) - Returns a shallow copy from start to end (not including end). Does not mutate original.

      let sliced = person.slice(1, 4);
      console.log(sliced); // Output: ["Arvind", "Mohan", "Abhinav"]

      // indexOf(value) - Returns the first index where the value is found, or -1 if not found.

      console.log(person.indexOf("Mohan")); // Output: 2

      // lastIndexOf(value) - Returns the last index where the value is found, or -1 if not found.

      console.log(person.lastIndexOf("Mohan")); // Output: 6

      // includes(value) - Returns true if the value is found, false otherwise.

      console.log(person.includes("Riya")); // true
      console.log(person.includes("Ajay")); // false

      // join(separator) - Joins all elements into a string with the specified separator - Returns a string with array values joined using the given separator

      console.log(person.join(" | ")); // Output: "Ritwik | Arvind | Mohan | Abhinav | Riya | Harikrishna | Mohan"

      // .join() is an Array method — not a String method.
      // You cannot use .join() directly on a string, but you can use it after splitting a string into an array

      // Example 1: Replace Spaces with Dashes
      const str = "hello world this is MERN";
      const res = str.split(" ").join("-");
      console.log(res); // "hello-world-this-is-MERN"

      // Example 2: Reverse a Sentence
      const sentence = "learn MERN with fun";
      const reversed = sentence.split(" ").reverse().join(" ");
      console.log(reversed); // "fun with MERN learn"

      // Example 3: Create CSV from User Input
      const input = "React Node MongoDB";
      const csv = input.split(" ").join(",");
      console.log(csv); // "React,Node,MongoDB"

      // Example 4: Default Join
      const fruits = ["apple", "banana", "cherry"];
      const res1 = fruits.join();
      console.log(res1); // "apple,banana,cherry"

      // "hello world".join("-"); // TypeError: join is not a string function

      console.log("@#####################");

      // 3. Iteration Methods (Used to iterate over the array):

      // forEach method
      function display(item, i) {
        console.log("Index value =" + i + " item value =" + item);
      }
      person.forEach(display); //basically a method which works like FOR OF

      //written in arrow function way
      person.forEach((item, i) => {
        console.log("Index value =" + i + " item value =" + item);
      });

      //written in anonymous function way
      person.forEach(function (item, i) {
        console.log("Index value =" + i + " item value =" + item);
      });

      console.log("@#####################");

      // find() method is used to search through an array and return the first element that matches a given condition.

      //find method - will always return a value - If no match is found, it returns undefined - returns only one matching element (first match)
      function searchPerson(per) {
        //userdefined function
        //console.log(per == "Riya"); //condition
        return per === "Riya";
      }
      let result = person.find(searchPerson); //predefined function
      console.log(result); //returning the value

      //written in anonymous function way
      let result1 = person.find(function (per) {
        return per === "Riya"; // condition to match
      });

      //written in arrow function way
      let result2 = person.find((per) => per === "Riya");

      console.log("@#####################");

      // filter method - will always return an array - returns all matching elements (as a new array) - If no match is found, it returns an empty array

      //let person = ["Riya", "Mohan", "Sohan", "Mohan", "Priya"];
      function checkPerson(per) {
        return per != "Mohan";
      }
      let result3 = person.filter(checkPerson);
      console.log(result3); //return the resultant array

      //written in anonymous function way
      let result4 = person.filter(function (per) {
        return per !== "Mohan"; // condition to match
      });

      //written in arrow function way
      let result5 = person.filter((per) => per !== "Mohan");

      console.log("@#####################");

      // map method - Return a new array with the same number of elements — but modified - If no match is found, it returns an empty array
      function changeToUppercase(per) {
        return per.toUpperCase();
      }
      let result6 = person.map(changeToUppercase);
      console.log(result6); //return the resultant array

      //written in anonymous function way
      let result7 = person.map(function (per) {
        return per.toUpperCase(); // condition to match
      });

      //written in arrow function way
      let result8 = person.map((per) => per.toUpperCase());

      console.log("@#####################");

      // reduce() method - Reduces the array to a single value (e.g., sum, product, combined object)
      // It takes a callback and an optional initial value.

      function reducer(accumulator, currentValue) {
        return accumulator + currentValue.length; // example: total length of all names
      }
      let totalLength = person.reduce(reducer, 0);
      console.log(totalLength); // Output: total number of characters in all names

      // written in anonymous function way
      let totalLength1 = person.reduce(function (acc, curr) {
        return acc + curr.length;
      }, 0);

      // written in arrow function way
      let totalLength2 = person.reduce((acc, curr) => acc + curr.length, 0);

      console.log("@#####################");

      // some() method - Returns true if **at least one** element matches the condition
      // If no match is found, returns false

      function hasShortName(name) {
        return name.length <= 4;
      }
      let someShort = person.some(hasShortName); // returns true if any name has length ≤ 4
      console.log(someShort); // true or false

      // anonymous function
      let someShort1 = person.some(function (name) {
        return name.length <= 4;
      });

      // arrow function
      let someShort2 = person.some((name) => name.length <= 4);

      console.log("@#####################");

      // every() method - Returns true only if **all** elements match the condition
      // If even one fails, it returns false

      function allHaveA(name) {
        return name.includes("a") || name.includes("A");
      }
      let allHaveAChar = person.every(allHaveA);
      console.log(allHaveAChar); // true or false

      // anonymous function
      let allHaveAChar1 = person.every(function (name) {
        return name.includes("a") || name.includes("A");
      });

      // arrow function
      let allHaveAChar2 = person.every((name) =>
        name.toLowerCase().includes("a")
      );

      console.log("@#####################");

      // findIndex() method - Returns the index of the first element matching the condition
      // If not found, returns -1

      function findMohanIndex(name) {
        return name === "Mohan";
      }
      let mohanIndex = person.findIndex(findMohanIndex);
      console.log(mohanIndex); // e.g., 2 (first "Mohan")

      // anonymous function
      let mohanIndex1 = person.findIndex(function (name) {
        return name === "Mohan";
      });

      // arrow function
      let mohanIndex2 = person.findIndex((name) => name === "Mohan");

      console.log("@#####################");

      // flat() method - Flattens a nested array (1 level by default)

      let nestedArray = [1, 2, [3, 4], [5, [6, 7]]];
      let flattenedOnce = nestedArray.flat(); // only flattens 1 level
      console.log(flattenedOnce); // [1, 2, 3, 4, 5, [6, 7]]

      let fullyFlattened = nestedArray.flat(2); // deep flatten
      console.log(fullyFlattened); // [1, 2, 3, 4, 5, 6, 7]

      console.log("@#####################");

      // flatMap() method - Combines map() followed by flat() in one step
      // Flattens the result of a map operation (one level only)

      let nameWithChars = person.flatMap((name) => name.split("")); // split each name into chars
      console.log(nameWithChars); // ["R", "i", "t", "w", ..., "a", "n"]

      // flatMap for transforming and filtering
      let namePairs = person.flatMap((name) =>
        name.length > 5 ? [name, name.length] : []
      );
      console.log(namePairs); // e.g., ["Ritwik", 6, "Arvind", 6, ...]

      console.log("@#####################");

      // 4. Other Methods:

      // toString() - Converts the array to a string representation - Returns a string with array values separated by commas
      console.log(person.toString()); //converting your array into a string
      console.log(person); //it will not change the original array

      console.log("@#####################");

      // Use Case Example: Convert Array to Uppercase

      // Create an array of strings with mixed case
      const stringArray = ["pUbliciS", "SapIenT", "banK"];

      // Display the original array
      document.getElementById("originalArray").textContent =
        "Original Array: " + stringArray.join();

      // Use map() to replace each value with its uppercase version
      const upperCaseArray = stringArray.map(function (item) {
        return item.toUpperCase(); // Convert each string to uppercase
      });

      // Display the updated array with uppercase values
      document.getElementById("uppercaseArray").textContent =
        "Uppercase Array: " + upperCaseArray.join(", ");

      // Use Case Example: Display Array of Strings
      // Create an array of strings
      const stringArray1 = ["Apple", "Banana", "Mango", "Orange", "Grapes"];

      // Get the unordered list element by its ID
      const listElement = document.getElementById("stringList");

      // Loop through the array and create a list item for each string
      stringArray1.forEach(function (e) {
        const li = document.createElement("li"); // Create a new list item (li)
        li.textContent = e; // Set the text content of the list item
        listElement.appendChild(li); // Add the list item to the unordered list
      });
    </script>
  </body>
</html>
